{% extends "layout.html" %}
{% block content %}
{% if session.user_id %}
<p>Olet kirjautunut nimellä {{ session.user_name }}</p>
<a href="/logout">Kirjaudu ulos</a>
{% else %}
<div class="header-text">
    <h2>Kirjaudu Sisään</h2>
    </div>
    <div class="register">
        <form action="/login" method="POST">
            <p>Tunnus:<br>
                <input type="text" name="username">
            </p>
            <p>Salasana:<br>
                <input type="password" name="password">
            </p>
            <input type="submit" value="Kirjaudu">
        </form>
        <a href="/register" class="button">Luo uusi tunnus</a>
    </div>
</div>
{% endif %}
<br>
{% if session.user_id %}
<form action="/add_citation" method="POST">
    <p style="font-size:20px">Uusi viite</p>

    <label for="citationtype">Viitetyyppi</label>
    <select name="citationtype" id="citationtype">
        <option value="Book">Kirja</option>
        <option value="Article">Artikkeli</option>
    </select>

    <label>Otsikko:</label>
    <input type="text" name="title">

    <label>Kirjoittaja: </label>
    <input type="text" name="author">

    <label>Vuosi: </label>
    <input type="number" name="year">

    <label>Artikkelin julkaisu:</label>
    <input type="text" name="journal">

    <input type="submit" value="Lisää viite">
</form>
<br>
<p style="font-size:26px">Viitteesi</p>
    {% for citation in citations %}

    {{citation[0]}}
    <form action="/delete_citation" method="POST">
        <input type="hidden" name="id" value="{{ citation[1] }}">
        <input type="submit" value="Poista">
    </form>
    <form action="/modify_citation/{{ citation[1] }}" method="GET">
        <input type="submit" value="Muokkaa">
    </form>
    <input type="checkbox" name="check" id="check" value="{{ citation[1] }}" form="checkbox">
    <hr>
    {% endfor %}
<form action="/bib" method="POST" id="checkbox">
    <input type="submit" value="Tarkastele valittuja viitteitä" name="nappi">
    <input type="submit" value="Lataa valitut viitteet" name="nappi">
</form>
</div>
<div class="container text-center">
    <div class="d-grid gap-2 col-3 mx-auto">
        <a class="btn btn-dark" href="dlbib" role="button">Lataa bib-tiedosto</a>
        <a class="btn btn-dark" href="copybib" target="_blank" role="button">Tarkastele bib-tiedostoa</a>
    </div>
</div>
{% endif %}
{% endblock %}
